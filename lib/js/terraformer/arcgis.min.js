!function(a,b){"object"==typeof module&&"object"==typeof module.exports&&(exports=module.exports=b()),"function"==typeof define&&define.amd&&define(["terraformer/terraformer"],b),"object"==typeof a.navigator&&("undefined"==typeof a.Terraformer&&(a.Terraformer={}),a.Terraformer.ArcGIS=b())}(this,function(){function a(a){for(var b,c=[],d=0;d<a.length;d++){b=a[d];for(var e=0;e<b.length;e++)c.push(b[e])}return c}function b(a,b){var c=f.Tools.arrayIntersectsArray(a,b),d=f.Tools.coordinatesContainPoint(a,b[0]);return!c&&d?!0:!1}function c(a){for(var c,d,e=[],f=0;f<a.length;f++){c=a[f];var g=[c],h=!1;for(d=0;d<a.length;d++){var i=a[d];c!==i&&b(i,c)&&(h=!0)}if(!h){for(d=0;d<a.length;d++){var j=a[d];c!==a[d]&&b(c,j)&&g.push(a[d])}e.push(g)}}return{type:"MultiPolygon",coordinates:e}}function d(a){var b={};a.x&&a.y&&(b.type="Point",b.coordinates=[a.x,a.y]),a.points&&(b.type="MultiPoint",b.coordinates=a.points),a.paths&&(1===a.paths.length?(b.type="LineString",b.coordinates=a.paths[0]):(b.type="MultiLineString",b.coordinates=a.paths)),a.rings&&(b=c(a.rings)),a.attributes&&a.geometry&&(b.type="Feature",b.geometry=d(a.geometry),b.properties=a.attributes);var e=a.geometry?a.geometry.spatialReference:a.spatialReference;return e&&102100===e.wkid&&(b=f.toGeographic(b)),new f.Primitive(b)}function e(b,c){var d,f=c?c:{wkid:4326},g={};switch(b.type){case"Point":g.x=b.coordinates[0],g.y=b.coordinates[1],g.spatialReference=f;break;case"MultiPoint":g.points=b.coordinates,g.spatialReference=f;break;case"LineString":g.paths=[b.coordinates],g.spatialReference=f;break;case"MultiLineString":g.paths=b.coordinates,g.spatialReference=f;break;case"Polygon":g.rings=b.coordinates,g.spatialReference=f;break;case"MultiPolygon":g.rings=a(b.coordinates),g.spatialReference=f;break;case"Feature":g.geometry=e(b.geometry),g.attributes=b.properties;break;case"FeatureCollection":for(g=[],d=0;d<b.features.length;d++)g.push(e(b.features[d]));break;case"GeometryCollection":for(g=[],d=0;d<b.geometries.length;d++)g.push(e(b.geometries[d]))}return g}var f,g={};return"object"==typeof this.navigator&&(f=this.Terraformer),"object"==typeof module&&"object"==typeof module.exports&&(f=require("terraformer")),arguments[0]&&"function"==typeof define&&define.amd&&(f=arguments[0]),g.parse=d,g.convert=e,g});